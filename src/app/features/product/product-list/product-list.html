<div class="p-6">
  <h2 class="text-2xl font-semibold mb-4">All Products</h2>

  @if (loading) {
    <div class="text-center py-10 text-gray-500">Loading...</div>
  } @else if (error) {
    <div class="text-center text-red-500">{{ error }}</div>
  } @else {
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      @for (p of products; track p.productId) {
        <div class="bg-white rounded-2xl shadow hover:shadow-lg transition p-4 flex flex-col">
          <img [src]="p.productImageUrl || 'https://via.placeholder.com/200'"
               alt="{{ p.productName }}"
               class="h-48 object-contain mb-4"/>
          <h3 class="font-semibold text-lg mb-1 line-clamp-1">{{ p.productName }}</h3>
          <p class="text-gray-600 text-sm line-clamp-2 mb-2">{{ p.productDescription }}</p>
          <p class="text-blue-600 font-bold text-lg mb-3">${{ p.productPrice }}</p>

          <div class="mt-auto flex justify-between items-center">
            <a [routerLink]="['/product', p.productId]" class="text-sm text-blue-500 hover:underline">View</a>
            <button (click)="addToCart(p)"
                    class="bg-blue-600 text-white px-3 py-1 rounded-xl hover:bg-blue-700 text-sm">
              Add to Cart
            </button>
          </div>
        </div>
      }
    </div>
  }
</div>
